import React, { useState, useEffect } from 'react';
import { motion, AnimatePresence } from 'framer-motion';
import { 
  Ghost, 
  Eye, 
  Brain, 
  Activity, 
  Skull, 
  Zap, 
  Lock, 
  TrendingDown, 
  CheckCircle2, 
  XCircle,
  AlertTriangle,
  Terminal,
  Menu,
  X
} from 'lucide-react';

// --- DATA: THE EXOTIC STATES ---
const EXOTIC_CATEGORIES = [
  {
    id: 'neurotic',
    title: '–ù–µ–≤—Ä–æ—Ç–∏—á–µ—Å–∫–∏–µ –ö–æ–º–ø—É–ª—å—Å–∏–∏',
    color: 'text-yellow-400',
    border: 'border-yellow-400',
    icon: <Eye />,
    states: [
      { id: 1, name: 'Stalker Pro Max', desc: '6+ —Ñ–µ–π–∫-–∞–∫–∫–∞—É–Ω—Ç–æ–≤. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Spotify –≤ 3 –Ω–æ—á–∏. –ê–Ω–∞–ª–∏–∑ —Ç–∞–π–º–∏–Ω–≥–æ–≤ WhatsApp.' },
      { id: 2, name: '–®–∏–∑–æ-–ù—É–º–µ—Ä–æ–ª–æ–≥–∏—è', desc: '–í–∏–¥–∏—à—å 11:11? –≠—Ç–æ –∑–Ω–∞–∫. –ù–æ–º–µ—Ä –º–∞—à–∏–Ω—ã 666? –≠—Ç–æ –æ–Ω –¥—É–º–∞–µ—Ç –æ —Ç–µ–±–µ. (–ù–µ—Ç).' },
      { id: 3, name: 'What-If –ü–µ—Ç–ª—è', desc: '–ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–π —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏, –≥–¥–µ –≤—ã —Å—á–∞—Å—Ç–ª–∏–≤—ã.' }
    ]
  },
  {
    id: 'dissociative',
    title: '–î–∏—Å—Å–æ—Ü–∏–∞—Ü–∏—è & –ü—É—Å—Ç–æ—Ç–∞',
    color: 'text-purple-400',
    border: 'border-purple-400',
    icon: <Ghost />,
    states: [
      { id: 4, name: 'VR-–†–µ–∂–∏–º (–î–µ—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)', desc: '–ú–∏—Ä ‚Äî —ç—Ç–æ –Ω–∏–∑–∫–æ–ø–æ–ª–∏–≥–æ–Ω–∞–ª—å–Ω–∞—è –∏–≥—Ä–∞. –¢—ã NPC –≤ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π –∂–∏–∑–Ω–∏.' },
      { id: 5, name: '–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –§–ª—ç—Ç–ª–∞–π–Ω', desc: '–ê–Ω–≥–µ–¥–æ–Ω–∏—è. –í—ã–∏–≥—Ä–∞–ª –º–∏–ª–ª–∏–æ–Ω? –ü–æ—Ñ–∏–≥. –£–º–µ—Ä –∫–æ—Ç–µ–Ω–æ–∫? –ü–æ—Ñ–∏–≥.' }
    ]
  },
  {
    id: 'somatic',
    title: '–ü—Å–∏—Ö–æ—Å–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ê–¥',
    color: 'text-red-400',
    border: 'border-red-400',
    icon: <Activity />,
    states: [
      { id: 6, name: '–§–∞–Ω—Ç–æ–º–Ω—ã–µ –ë–æ–ª–∏', desc: '–¢–∞—Ö–∏–∫–∞—Ä–¥–∏—è 150 BPM –ª–µ–∂–∞ –Ω–∞ –¥–∏–≤–∞–Ω–µ. –û—â—É—â–µ–Ω–∏–µ "–ø—Ä–∏–∑—Ä–∞–∫–∞" –≤ –ø–æ—Å—Ç–µ–ª–∏.' },
      { id: 7, name: '–î–µ–Ω—å –°—É—Ä–∫–∞ (Sleep Paralysis)', desc: '–ü—Ä–æ—Å—ã–ø–∞–µ—à—å—Å—è —Å—á–∞—Å—Ç–ª–∏–≤—ã–º –Ω–∞ 1 —Å–µ–∫—É–Ω–¥—É, –ø–æ—Ç–æ–º —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å –±—å–µ—Ç –ª–æ–ø–∞—Ç–æ–π.' }
    ]
  },
  {
    id: 'behavioral',
    title: '–ü–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–µ –ì–ª—é–∫–∏',
    color: 'text-blue-400',
    border: 'border-blue-400',
    icon: <Zap />,
    states: [
      { id: 8, name: '–†–∏—Ç—É–∞–ª—ã –ü—Ä–æ–≤–µ—Ä–∫–∏', desc: '–ó–∞–π—Ç–∏ –≤ –ø—Ä–æ—Ñ–∏–ª—å, –¥–∞–∂–µ –µ—Å–ª–∏ —Ç–∞–º –±–ª–æ–∫. "–ï—Å–ª–∏ –Ω–µ –ø—Ä–æ–≤–µ—Ä—é ‚Äî –æ–Ω –∂–µ–Ω–∏—Ç—Å—è".' },
      { id: 9, name: '–ê–º–Ω–µ–∑–∏—è –ü–ª–æ—Ö–æ–≥–æ', desc: '–ú–æ–∑–≥ —É–¥–∞–ª–∏–ª –≤—Å–µ —Å—Å–æ—Ä—ã. –û—Å—Ç–∞–ª—Å—è —Ç–æ–ª—å–∫–æ –º–æ–Ω—Ç–∞–∂ "–õ—É—á—à–∏–µ –º–æ–º–µ–Ω—Ç—ã".' },
      { id: 10, name: '–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –°–∞–ª—å—Ç–æ', desc: '–û—Ç "–õ—é–±–ª—é –Ω–µ –º–æ–≥—É" –¥–æ "–°–¥–æ—Ö–Ω–∏ —Ç–≤–∞—Ä—å" –∑–∞ 12 –º–∏–Ω—É—Ç.' }
    ]
  },
  {
    id: 'narcissistic',
    title: '–ü—Ä–æ–µ–∫—Ü–∏–∏ & –ü–∞—Ä–∞–Ω–æ–π—è',
    color: 'text-pink-400',
    border: 'border-pink-400',
    icon: <Brain />,
    states: [
      { id: 11, name: '–¢–µ–ª–µ–ø–∞—Ç–∏—è (–õ–æ–∂–Ω–∞—è)', desc: '"–Ø —á—É–≤—Å—Ç–≤—É—é, —á—Ç–æ –æ–Ω —Å—Ç—Ä–∞–¥–∞–µ—Ç". –°–ø–æ–π–ª–µ—Ä: –æ–Ω –µ—Å—Ç –±—É—Ä–≥–µ—Ä.' },
      { id: 12, name: '–§–∞–Ω—Ç–æ–º–Ω—ã–µ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è', desc: '–¢–µ–ª–µ—Ñ–æ–Ω –º–æ–ª—á–∏—Ç, –Ω–æ —Ç—ã —Å–ª—ã—à–∏—à—å –≤–∏–±—Ä–∞—Ü–∏—é. –≠—Ç–æ –∑–≤–æ–Ω–∏—Ç —Ç–≤–æ–µ –æ—Ç—á–∞—è–Ω–∏–µ.' }
    ]
  },
  {
    id: 'traumatic',
    title: '–¢—Ä–∞–≤–º–∞ & PTSD',
    color: 'text-orange-500',
    border: 'border-orange-500',
    icon: <AlertTriangle />,
    states: [
      { id: 13, name: '–¢–µ–Ω—å –õ–∏—á–Ω–æ—Å—Ç–∏', desc: '–ü–∞–Ω–∏—á–µ—Å–∫–∏–µ –∞—Ç–∞–∫–∏ –ø—Ä–∏ –≤–∏–¥–µ –ø–æ—Ö–æ–∂–µ–π –∫—É—Ä—Ç–∫–∏. "–Ø –±–æ–ª—å—à–µ –Ω–∏–∫–æ–≥–æ –Ω–µ –ø–æ–ª—é–±–ª—é".' },
      { id: 14, name: 'Breakup OCD', desc: '–ù–∞–≤—è–∑—á–∏–≤–æ–µ –ø–µ—Ä–µ–∂–µ–≤—ã–≤–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ 5-–ª–µ—Ç–Ω–µ–π –¥–∞–≤–Ω–æ—Å—Ç–∏.' }
    ]
  },
  {
    id: 'paradox',
    title: '–ü–∞—Ä–∞–¥–æ–∫—Å—ã',
    color: 'text-gray-400',
    border: 'border-gray-400',
    icon: <Terminal />,
    states: [
      { id: 15, name: '–û–±–ª–µ–≥—á–µ–Ω–∏–µ + –ì–æ—Ä–µ', desc: '–¢—ã —Ä–∞–¥–∞, —á—Ç–æ –æ–Ω —É—à–µ–ª, –Ω–æ —Ö–æ—á–µ—à—å —É–º–µ—Ä–µ—Ç—å –æ—Ç —Ç–æ—Å–∫–∏. –õ–æ–≥–∏–∫–∞ –≤—ã—à–ª–∞ –∏–∑ —á–∞—Ç–∞.' },
      { id: 16, name: 'Pain Shopping', desc: '–°–º–æ—Ç—Ä–∏—à—å –µ–≥–æ —Ñ–æ—Ç–æ —Å –Ω–æ–≤–æ–π –±–∞–±–æ–π, —á—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å —Å–µ–±–µ –±–æ–ª—å–Ω–æ. –ú–∞–∑–æ—Ö–∏–∑–º.' }
    ]
  }
];

// --- COMPONENTS ---

const GlitchText = ({ text, className }) => {
  return (
    <div className={`relative inline-block ${className}`}>
      <span className="relative z-10">{text}</span>
      <span className="absolute top-0 left-0 -ml-0.5 translate-x-[2px] text-red-500 opacity-70 animate-pulse z-0">{text}</span>
      <span className="absolute top-0 left-0 -ml-0.5 -translate-x-[2px] text-blue-500 opacity-70 animate-pulse delay-75 z-0">{text}</span>
    </div>
  );
};

const StateCard = ({ state, color, border, selected, onClick }) => (
  <motion.div
    whileTap={{ scale: 0.95 }}
    onClick={onClick}
    className={`p-4 rounded-xl border-2 cursor-pointer transition-all duration-200 relative overflow-hidden ${
      selected 
        ? `${border} bg-gray-900 shadow-[0_0_15px_rgba(0,0,0,0.5)]` 
        : 'border-gray-800 bg-gray-950 hover:border-gray-600'
    }`}
  >
    {selected && (
      <div className={`absolute top-0 right-0 p-1 ${color}`}>
        <CheckCircle2 size={16} />
      </div>
    )}
    <h4 className={`font-bold text-sm mb-1 ${selected ? color : 'text-gray-300'}`}>{state.name}</h4>
    <p className="text-xs text-gray-500 leading-tight">{state.desc}</p>
  </motion.div>
);

// --- SCREENS ---

const WelcomeScreen = ({ onStart }) => (
  <div className="flex flex-col items-center justify-center min-h-[60vh] text-center px-4">
    <motion.div
      initial={{ scale: 0.8, opacity: 0 }}
      animate={{ scale: 1, opacity: 1 }}
      className="mb-6"
    >
      <Skull size={80} className="text-red-500 mx-auto mb-4" />
      <h1 className="text-5xl md:text-7xl font-black mb-2 tracking-tighter uppercase">
        <GlitchText text="EXOTIC" /> <span className="text-gray-600">STATES</span>
      </h1>
      <p className="text-xl md:text-2xl font-mono text-green-500 mb-8">
        TRACKER v.2.0 (BROKEN_HEART_EDITION)
      </p>
    </motion.div>

    <div className="max-w-xl bg-gray-900/50 p-6 rounded-2xl border border-gray-800 backdrop-blur-sm mb-8">
      <p className="text-gray-300 mb-4 text-left font-mono text-sm">
        &gt; DETECTING SYSTEM FAILURE...<br/>
        &gt; EMOTIONAL CORE COMPROMISED.<br/>
        &gt; INITIATING DIAGNOSTIC PROTOCOL.<br/>
        <br/>
        <span className="text-white font-sans">
          –ú—ã –∑–Ω–∞–µ–º, —á—Ç–æ –≤—ã –¥–µ–ª–∞–ª–∏ –ø—Ä–æ—à–ª–æ–π –Ω–æ—á—å—é. –í—ã –ø—Ä–æ–≤–µ—Ä—è–ª–∏ –µ–≥–æ —Å—Ç–∞—Ç—É—Å "–≤ —Å–µ—Ç–∏". 
          –î–∞–≤–∞–π—Ç–µ –ø—Ä–µ–≤—Ä–∞—Ç–∏–º –≤–∞—à—É –æ–¥–µ—Ä–∂–∏–º–æ—Å—Ç—å –≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É.
        </span>
      </p>
    </div>

    <motion.button
      whileHover={{ scale: 1.05 }}
      whileTap={{ scale: 0.95 }}
      onClick={onStart}
      className="bg-red-600 hover:bg-red-700 text-white font-black py-4 px-12 rounded-full text-xl shadow-lg shadow-red-900/40 uppercase tracking-widest"
    >
      –ù–∞—á–∞—Ç—å –ß–µ–∫-–∏–Ω
    </motion.button>
    <p className="mt-4 text-xs text-gray-600 uppercase">–û—Å—Ç–æ—Ä–æ–∂–Ω–æ: —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∞–≤–¥—É</p>
  </div>
);

const TrackerScreen = ({ onFinish }) => {
  const [step, setStep] = useState(1);
  const [selectedStates, setSelectedStates] = useState([]);
  const [intensity, setIntensity] = useState(5);
  const [compulsions, setCompulsions] = useState([]);

  const toggleState = (id) => {
    if (selectedStates.includes(id)) {
      setSelectedStates(selectedStates.filter(s => s !== id));
    } else {
      setSelectedStates([...selectedStates, id]);
    }
  };

  const toggleCompulsion = (comp) => {
    if (compulsions.includes(comp)) {
      setCompulsions(compulsions.filter(c => c !== comp));
    } else {
      setCompulsions([...compulsions, comp]);
    }
  };

  const steps = [
    { id: 1, title: "1. –í—ã–±–µ—Ä–∏ —Å–≤–æ–∏—Ö –¥–µ–º–æ–Ω–æ–≤", subtitle: "–ö–∞–∫–∏–µ '—ç–∫–∑–æ—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è' –ø–æ—Å–µ—Ç–∏–ª–∏ —Ç–µ–±—è —Å–µ–≥–æ–¥–Ω—è?" },
    { id: 2, title: "2. –®–∫–∞–ª–∞ –û—Ç—á–∞—è–Ω–∏—è", subtitle: "–ù–∞—Å–∫–æ–ª—å–∫–æ —Å–∏–ª—å–Ω–æ —Ö–æ—Ç–µ–ª–æ—Å—å –Ω–∞–ø–∏—Å–∞—Ç—å –µ–º—É '—è —Å–∫—É—á–∞—é'?" },
    { id: 3, title: "3. –ò—Å–ø–æ–≤–µ–¥–∞–ª—å–Ω—è", subtitle: "–ß–µ—Å—Ç–Ω–æ. –ú—ã –Ω–∏–∫–æ–º—É –Ω–µ —Å–∫–∞–∂–µ–º." }
  ];

  return (
    <div className="max-w-3xl mx-auto px-4 py-6">
      <div className="mb-8">
        <div className="flex justify-between items-end mb-2">
          <h2 className="text-2xl font-bold text-white">{steps[step-1].title}</h2>
          <span className="text-gray-500 font-mono">STEP {step}/3</span>
        </div>
        <div className="h-1 bg-gray-800 rounded-full">
          <motion.div 
            className="h-full bg-green-500 rounded-full"
            initial={{ width: 0 }}
            animate={{ width: `${(step/3)*100}%` }}
          />
        </div>
        <p className="mt-2 text-gray-400">{steps[step-1].subtitle}</p>
      </div>

      <div className="min-h-[400px]">
        {step === 1 && (
          <div className="space-y-6">
            {EXOTIC_CATEGORIES.map((cat) => (
              <div key={cat.id}>
                <div className={`flex items-center gap-2 mb-3 text-sm font-bold uppercase tracking-wider ${cat.color}`}>
                  {cat.icon} {cat.title}
                </div>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
                  {cat.states.map((st) => (
                    <StateCard 
                      key={st.id} 
                      state={st} 
                      color={cat.color}
                      border={cat.border}
                      selected={selectedStates.includes(st.id)}
                      onClick={() => toggleState(st.id)}
                    />
                  ))}
                </div>
              </div>
            ))}
          </div>
        )}

        {step === 2 && (
          <div className="flex flex-col items-center justify-center py-12">
            <div className="w-full max-w-md">
              <div className="flex justify-between mb-8 text-4xl font-black">
                <span className="text-green-500">üòê</span>
                <span className="text-yellow-500">üò¨</span>
                <span className="text-red-600">ü§°</span>
              </div>
              <input 
                type="range" 
                min="1" 
                max="10" 
                value={intensity} 
                onChange={(e) => setIntensity(parseInt(e.target.value))}
                className="w-full h-4 bg-gray-800 rounded-lg appearance-none cursor-pointer accent-red-500"
              />
              <div className="mt-8 text-center">
                <span className="text-6xl font-black text-white">{intensity}</span>
                <span className="text-xl text-gray-500">/10</span>
              </div>
              <div className="mt-4 text-center text-lg font-mono text-red-400">
                {intensity < 4 && "–¢–µ—Ä–ø–∏–º–æ. –¢—ã —Å–ø—Ä–∞–≤–ª—è–µ—à—å—Å—è."}
                {intensity >= 4 && intensity < 8 && "–û–ø–∞—Å–Ω–æ. –£–±–µ—Ä–∏ —Ç–µ–ª–µ—Ñ–æ–Ω."}
                {intensity >= 8 && "CODE RED. –ó–≤–æ–Ω–∏ –ø–æ–¥—Ä—É–≥–µ, –∞ –Ω–µ –µ–º—É!"}
              </div>
            </div>
          </div>
        )}

        {step === 3 && (
          <div className="space-y-4">
            {[
              "–ü—Ä–æ–≤–µ—Ä–∏–ª(–∞) –µ–≥–æ —Å–æ—Ü—Å–µ—Ç–∏ (Stalking)",
              "–°–æ–∑–¥–∞–ª(–∞) —Ñ–µ–π–∫ –∞–∫–∫–∞—É–Ω—Ç",
              "–ò—Å–∫–∞–ª(–∞) —Å–∫—Ä—ã—Ç—ã–π —Å–º—ã—Å–ª –≤ –µ–≥–æ –ª–∞–π–∫–∞—Ö",
              "–ü–µ—Ä–µ—á–∏—Ç—ã–≤–∞–ª(–∞) —Å—Ç–∞—Ä—ã–µ –ø–µ—Ä–µ–ø–∏—Å–∫–∏",
              "–ù–∞–ø–∏—Å–∞–ª(–∞) —á–µ—Ä–Ω–æ–≤–∏–∫ —Å–æ–æ–±—â–µ–Ω–∏—è",
              "–°–º–æ—Ç—Ä–µ–ª(–∞) –¢–∞—Ä–æ —Ä–∞—Å–∫–ª–∞–¥—ã –Ω–∞ YouTube"
            ].map((comp, idx) => (
              <div 
                key={idx}
                onClick={() => toggleCompulsion(comp)}
                className={`p-4 rounded-lg border flex items-center justify-between cursor-pointer ${
                  compulsions.includes(comp) 
                    ? 'bg-red-900/20 border-red-500 text-white' 
                    : 'bg-gray-900 border-gray-800 text-gray-400 hover:bg-gray-800'
                }`}
              >
                <span>{comp}</span>
                {compulsions.includes(comp) ? <XCircle className="text-red-500" /> : <div className="w-5 h-5 rounded-full border border-gray-600" />}
              </div>
            ))}
            
            <div className="mt-8 p-4 bg-green-900/20 border border-green-600 rounded-lg">
              <h4 className="text-green-400 font-bold mb-2">–¢–≤–æ—è –ø–æ–±–µ–¥–∞ —Å–µ–≥–æ–¥–Ω—è:</h4>
              <select className="w-full bg-black border border-green-800 rounded p-2 text-white">
                <option>–Ø –Ω–µ –Ω–∞–ø–∏—Å–∞–ª(–∞) –µ–º—É</option>
                <option>–Ø –Ω–µ –∑–∞—Ö–æ–¥–∏–ª(–∞) –Ω–∞ –µ–≥–æ —Å—Ç—Ä–∞–Ω–∏—Ü—É</option>
                <option>–Ø –ø–æ–µ–ª(–∞) –≤–ø–µ—Ä–≤—ã–µ –∑–∞ –¥–µ–Ω—å</option>
                <option>–Ø —É–¥–∞–ª–∏–ª(–∞) –Ω–∞—à —á–∞—Ç</option>
                <option>–Ø –ø—Ä–æ—Å—Ç–æ –≤—ã–∂–∏–ª(–∞)</option>
              </select>
            </div>
          </div>
        )}
      </div>

      <div className="mt-8 flex justify-between pt-4 border-t border-gray-800">
        <button 
          onClick={() => step > 1 && setStep(step - 1)}
          className={`px-6 py-3 rounded-lg font-bold ${step === 1 ? 'opacity-0 pointer-events-none' : 'text-gray-400 hover:text-white'}`}
        >
          –ù–∞–∑–∞–¥
        </button>
        <button 
          onClick={() => step < 3 ? setStep(step + 1) : onFinish()}
          className="bg-white text-black px-8 py-3 rounded-lg font-bold hover:bg-gray-200 transition-colors"
        >
          {step === 3 ? '–ó–∞–≤–µ—Ä—à–∏—Ç—å –î–µ–Ω—å' : '–î–∞–ª–µ–µ'}
        </button>
      </div>
    </div>
  );
};

const DashboardScreen = ({ onReset }) => (
  <div className="max-w-4xl mx-auto px-4 py-8">
    <div className="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
      <div className="md:col-span-2 bg-gray-900 p-6 rounded-2xl border border-gray-800">
        <h3 className="text-gray-400 font-mono text-xs uppercase mb-4">–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç</h3>
        <div className="flex items-end space-x-2 h-40">
          {[40, 65, 30, 85, 50, 20, 10].map((h, i) => (
            <div key={i} className="flex-1 flex flex-col justify-end group">
              <div 
                className="w-full bg-gradient-to-t from-red-900 to-red-500 rounded-t-sm transition-all duration-300 group-hover:opacity-80"
                style={{ height: `${h}%` }}
              ></div>
              <span className="text-center text-xs text-gray-600 mt-2">{['–ü–ù', '–í–¢', '–°–†', '–ß–¢', '–ü–¢', '–°–ë', '–í–°'][i]}</span>
            </div>
          ))}
        </div>
        <p className="mt-4 text-sm text-gray-400">
          –ü–∏–∫ –±–µ–∑—É–º–∏—è –ø—Ä–∏—à–µ–ª—Å—è –Ω–∞ <span className="text-white font-bold">–ß–µ—Ç–≤–µ—Ä–≥ (3:00 AM)</span>. –í–µ—Ä–æ—è—Ç–Ω–æ, —Ç—ã —É–≤–∏–¥–µ–ª–∞, —á—Ç–æ –æ–Ω –ª–∞–π–∫–Ω—É–ª —Ñ–æ—Ç–æ –¥–µ–≤—É—à–∫–∏ —Å —á–µ–ª–∫–æ–π.
        </p>
      </div>

      <div className="space-y-6">
        <div className="bg-gray-900 p-6 rounded-2xl border border-green-900">
          <h3 className="text-green-500 font-bold mb-1">Streak: 3 –¥–Ω—è</h3>
          <p className="text-xs text-gray-500">–ë–µ–∑ –ø—Ä—è–º—ã—Ö –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤</p>
          <div className="flex mt-3 space-x-1">
            <div className="w-full h-2 bg-green-500 rounded-full animate-pulse"></div>
            <div className="w-full h-2 bg-green-500 rounded-full animate-pulse delay-75"></div>
            <div className="w-full h-2 bg-green-500 rounded-full animate-pulse delay-150"></div>
            <div className="w-full h-2 bg-gray-700 rounded-full"></div>
            <div className="w-full h-2 bg-gray-700 rounded-full"></div>
          </div>
        </div>

        <div className="bg-gray-900 p-6 rounded-2xl border border-purple-900">
          <h3 className="text-purple-400 font-bold mb-1">–î–∏–∞–≥–Ω–æ–∑ –Ω–µ–¥–µ–ª–∏</h3>
          <p className="text-sm text-white font-mono">"Obsessive Reassurance Seeker"</p>
          <p className="text-xs text-gray-500 mt-2">–¢—ã –∏—â–µ—à—å –∑–Ω–∞–∫–∏ —Ç–∞–º, –≥–¥–µ –∏—Ö –Ω–µ—Ç. –û—Å—Ç—ã–Ω—å.</p>
        </div>
      </div>
    </div>

    <div className="bg-black border border-gray-800 p-6 rounded-xl">
      <h3 className="text-xl font-bold text-white mb-4 flex items-center gap-2">
        <Terminal size={20} /> –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø AI:
      </h3>
      <div className="font-mono text-green-500 text-sm md:text-base space-y-2">
        <p>&gt; ANALYZING COMPULSIONS... DONE.</p>
        <p>&gt; DETECTED PATTERN: "Spotify Stalking".</p>
        <p>&gt; SOLUTION: –•–≤–∞—Ç–∏—Ç –¥—É–º–∞—Ç—å, —á—Ç–æ –ø–µ—Å–Ω—è "Creep" –ø–æ—Å–≤—è—â–µ–Ω–∞ —Ç–µ–±–µ. –û–Ω –ø—Ä–æ—Å—Ç–æ –ª—é–±–∏—Ç Radiohead. –ó–∞–±–ª–æ–∫–∏—Ä—É–π –µ–≥–æ –≤–µ–∑–¥–µ –∏ –∏–¥–∏ —Å–ø–∞—Ç—å.</p>
        <p className="text-gray-500 mt-4">System Status: Waiting for relapse...</p>
      </div>
    </div>

    <button 
      onClick={onReset}
      className="mt-8 w-full py-4 text-center text-gray-500 hover:text-white transition-colors"
    >
      –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é (–ù–æ–≤—ã–π –¥–µ–Ω—å)
    </button>
  </div>
);

// --- MAIN APP ---

const App = () => {
  const [view, setView] = useState('welcome'); // welcome, tracker, dashboard

  return (
    <div className="min-h-screen bg-black text-gray-200 font-sans selection:bg-red-500 selection:text-white">
      {/* Header */}
      <nav className="border-b border-gray-900 p-4 sticky top-0 bg-black/80 backdrop-blur-md z-50">
        <div className="max-w-5xl mx-auto flex justify-between items-center">
          <div className="flex items-center space-x-2 font-black tracking-tighter text-xl cursor-pointer" onClick={() => setView('welcome')}>
            <div className="w-8 h-8 bg-red-600 rounded-full flex items-center justify-center text-black">
              <TrendingDown size={18} />
            </div>
            <span>SPIRAL<span className="text-red-600">.APP</span></span>
          </div>
          <div className="flex space-x-4 text-sm font-mono text-gray-500">
            <span className="hidden md:inline">STATUS: UNSTABLE</span>
            <Menu className="md:hidden" />
          </div>
        </div>
      </nav>

      {/* Content */}
      <main className="relative">
        <AnimatePresence mode="wait">
          {view === 'welcome' && (
            <motion.div 
              key="welcome"
              initial={{ opacity: 0 }} 
              animate={{ opacity: 1 }} 
              exit={{ opacity: 0 }}
            >
              <WelcomeScreen onStart={() => setView('tracker')} />
            </motion.div>
          )}

          {view === 'tracker' && (
            <motion.div 
              key="tracker"
              initial={{ y: 20, opacity: 0 }} 
              animate={{ y: 0, opacity: 1 }} 
              exit={{ y: -20, opacity: 0 }}
            >
              <TrackerScreen onFinish={() => setView('dashboard')} />
            </motion.div>
          )}

          {view === 'dashboard' && (
            <motion.div 
              key="dashboard"
              initial={{ scale: 0.95, opacity: 0 }} 
              animate={{ scale: 1, opacity: 1 }} 
              exit={{ scale: 1.05, opacity: 0 }}
            >
              <DashboardScreen onReset={() => setView('welcome')} />
            </motion.div>
          )}
        </AnimatePresence>
      </main>

      {/* Footer */}
      <footer className="border-t border-gray-900 mt-12 py-8 text-center text-gray-700 text-xs font-mono">
        <p>BASED ON REDDIT RESEARCH (unfortunately real)</p>
        <p className="mt-2">¬© 2025 SPIRAL INDUSTRIES. WE MONETIZE YOUR TEARS.</p>
      </footer>
    </div>
  );
};

export default App;
